<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dot1Xer Supreme UI Update</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      margin: 20px;
      padding: 0;
      background-color: #f5f5f5;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    h1, h2, h3 {
      color: #6300c4;
    }
    h1 {
      border-bottom: 1px solid #ddd;
      padding-bottom: 10px;
    }
    .btn {
      background-color: #6300c4;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 20px;
    }
    .btn:hover {
      background-color: #4a0091;
    }
    .success-message {
      color: #28a745;
      font-weight: bold;
      display: none;
      margin-top: 20px;
      padding: 10px;
      background-color: #d4edda;
      border-radius: 5px;
    }
    .error-message {
      color: #dc3545;
      font-weight: bold;
      display: none;
      margin-top: 20px;
      padding: 10px;
      background-color: #f8d7da;
      border-radius: 5px;
    }
    .feature-list {
      margin: 20px 0;
    }
    .feature-list li {
      margin-bottom: 10px;
    }
    .feature-item {
      font-weight: bold;
    }
    .feature-desc {
      font-weight: normal;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Dot1Xer Supreme Enhancement Tool</h1>
    <p>This tool will update your Dot1Xer Supreme installation with improved features and fixes:</p>
    
    <ul class="feature-list">
      <li><span class="feature-item">? Fixed Accordion Functionality:</span>
        <span class="feature-desc">Properly working accordion dropdowns for all sections.</span>
      </li>
      <li><span class="feature-item">? Reorganized RADIUS/TACACS+ Settings:</span>
        <span class="feature-desc">Better organized into logical sections with improved usability.</span>
      </li>
      <li><span class="feature-item">? Vendor-Specific Configuration Options:</span>
        <span class="feature-desc">Tailored options for each platform that dynamically update based on selection.</span>
      </li>
      <li><span class="feature-item">? Network Scoping Discovery:</span>
        <span class="feature-desc">New comprehensive tool to build network diagrams and deployment plans.</span>
      </li>
      <li><span class="feature-item">? Workflow Generator:</span>
        <span class="feature-desc">Creates customized deployment workflows with timeline estimates.</span>
      </li>
    </ul>
    
    <h2>Applying the Updates</h2>
    <p>Click the button below to apply these enhancements to your Dot1Xer Supreme installation. This process:</p>
    <ol>
      <li>Updates the JavaScript functionality</li>
      <li>Adds new CSS styles and elements</li>
      <li>Reorganizes existing UI components</li>
      <li>Adds the network scoping discovery feature</li>
    </ol>
    
    <button id="update-button" class="btn">Apply Updates</button>
    <div id="success-message" class="success-message">
      Updates successfully applied! Please refresh the page to see the enhancements.
    </div>
    <div id="error-message" class="error-message">
      Error applying updates. Please check the console for details.
    </div>
    
    <!-- Hidden elements containing update scripts -->
    <script id="server-tab-update-script" type="text/plain">
// Helper function to create accordion
function createAccordion(title, content, open = false) {
  const accordion = document.createElement('div');
  accordion.className = 'accordion';
  
  const header = document.createElement('div');
  header.className = 'accordion-header';
  if (open) header.classList.add('active');
  header.innerHTML = `<span>${title}</span><span class="accordion-icon">${open ? '-' : '+'}</span>`;
  
  const contentDiv = document.createElement('div');
  contentDiv.className = 'accordion-content';
  contentDiv.style.display = open ? 'block' : 'none';
  contentDiv.innerHTML = content;
  
  accordion.appendChild(header);
  accordion.appendChild(contentDiv);
  
  return accordion;
}

// Find the RADIUS tab content and reorganize
const radiusTab = document.getElementById('radius-tab');
if (radiusTab) {
  // Save original content
  const originalContent = radiusTab.innerHTML;
  
  // Clear the tab
  radiusTab.innerHTML = '';
  
  // Add section title
  const sectionTitle = document.createElement('h4');
  sectionTitle.textContent = 'RADIUS Servers';
  radiusTab.appendChild(sectionTitle);
  
  // Create main RADIUS server form group
  const serverGroup = document.createElement('div');
  serverGroup.className = 'form-group';
  serverGroup.innerHTML = `
    <label for="radius-server-group">Server Group Name:</label>
    <input type="text" id="radius-server-group" value="RADIUS-SERVERS" placeholder="e.g., RADIUS-SERVERS">
    
    <div class="row">
      <div class="col">
        <label for="radius-ip-1">Primary Server IP:</label>
        <input type="text" id="radius-ip-1" placeholder="e.g., 10.1.1.100">
      </div>
      <div class="col">
        <label for="radius-key-1">Primary Shared Secret:</label>
        <input type="password" id="radius-key-1" placeholder="Shared secret">
      </div>
    </div>
    
    <div class="row">
      <div class="col">
        <label for="radius-ip-2">Secondary Server IP:</label>
        <input type="text" id="radius-ip-2" placeholder="e.g., 10.1.1.101">
      </div>
      <div class="col">
        <label for="radius-key-2">Secondary Shared Secret:</label>
        <input type="password" id="radius-key-2" placeholder="Shared secret">
      </div>
    </div>
  `;
  radiusTab.appendChild(serverGroup);
  
  // Create accordion group for RADIUS settings
  const accordionGroup = document.createElement('div');
  accordionGroup.className = 'accordion-group';
  
  // Add RADIUS port configuration accordion
  const portConfig = `
    <div class="row">
      <div class="col">
        <label for="radius-auth-port">Authentication Port:</label>
        <input type="number" id="radius-auth-port" value="1812">
      </div>
      <div class="col">
        <label for="radius-acct-port">Accounting Port:</label>
        <input type="number" id="radius-acct-port" value="1813">
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="radius-coa-port">CoA Port:</label>
        <input type="number" id="radius-coa-port" value="3799">
      </div>
    </div>
  `;
  accordionGroup.appendChild(createAccordion('RADIUS Port Configuration', portConfig, true));
  
  // Add timeout settings accordion
  const timeoutConfig = `
    <div class="row">
      <div class="col">
        <label for="radius-timeout">Timeout (seconds):</label>
        <input type="number" id="radius-timeout" value="5">
      </div>
      <div class="col">
        <label for="radius-retransmit">Retransmit Count:</label>
        <input type="number" id="radius-retransmit" value="3">
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="radius-deadtime">Dead Time (minutes):</label>
        <input type="number" id="radius-deadtime" value="15">
      </div>
    </div>
  `;
  accordionGroup.appendChild(createAccordion('RADIUS Timeouts SERVER_TAB_UPDATE_PLACEHOLDER Retransmit', timeoutConfig));
  
  // Add load balancing accordion
  const loadBalanceConfig = `
    <div class="checkbox-group">
      <label>
        <input type="checkbox" id="radius-load-balance"> 
        Enable Load Balancing
      </label>
    </div>
    
    <div id="load-balance-options" style="display: none;">
      <label for="load-balance-method">Load Balance Method:</label>
      <select id="load-balance-method">
        <option value="least-outstanding">Least Outstanding</option>
        <option value="batch">Batch</option>
        <option value="simple">Simple Round-Robin</option>
      </select>
    </div>
  `;
  accordionGroup.appendChild(createAccordion('Load Balancing Configuration', loadBalanceConfig));
  
  // Add server testing accordion
  const testingConfig = `
    <div class="checkbox-group">
      <label>
        <input type="checkbox" id="radius-testing" checked> 
        Enable Automated Server Testing
      </label>
    </div>
    
    <div id="testing-options">
      <label for="testing-username">Testing Username:</label>
      <input type="text" id="testing-username" value="radius-test">
      
      <div class="checkbox-group">
        <label>
          <input type="checkbox" id="testing-idle-time" checked> 
          Enable Idle-Time Testing
        </label>
      </div>
      
      <div id="idle-time-options">
        <label for="idle-time">Idle Time (minutes):</label>
        <input type="number" id="idle-time" value="60">
      </div>
    </div>
  `;
  accordionGroup.appendChild(createAccordion('Server Testing', testingConfig));
  
  // Add RADIUS attributes accordion
  const attributesConfig = `
    <div class="row">
      <div class="col">
        <div class="checkbox-group">
          <label>
            <input type="checkbox" id="attr-nas-ip" checked> 
            Include NAS-IP-Address (4)
          </label>
        </div>
        <div class="checkbox-group">
          <label>
            <input type="checkbox" id="attr-service-type" checked> 
            Include Service-Type (6)
          </label>
        </div>
      </div>
      <div class="col">
        <div class="checkbox-group">
          <label>
            <input type="checkbox" id="attr-framed-mtu"> 
            Include Framed-MTU (12)
          </label>
        </div>
        <div class="checkbox-group">
          <label>
            <input type="checkbox" id="attr-class" checked> 
            Include Class (25)
          </label>
        </div>
      </div>
    </div>
    
    <label for="mac-format">MAC Address Format:</label>
    <select id="mac-format">
      <option value="ietf">IETF (xx-xx-xx-xx-xx-xx)</option>
      <option value="cisco">Cisco (xxxx.xxxx.xxxx)</option>
      <option value="unformatted">Unformatted (xxxxxxxxxxxx)</option>
    </select>
    
    <div class="checkbox-group">
      <label>
        <input type="checkbox" id="mac-case" checked> 
        Use Uppercase for MAC Address
      </label>
    </div>
  `;
  accordionGroup.appendChild(createAccordion('RADIUS Attributes', attributesConfig));
  
  // Add to tab
  radiusTab.appendChild(accordionGroup);
}

// Similarly reorganize the TACACS+ tab
const tacacsTab = document.getElementById('tacacs-tab');
if (tacacsTab) {
  // Save original content
  const originalContent = tacacsTab.innerHTML;
  
  // Clear the tab
  tacacsTab.innerHTML = '';
  
  // Add section title
  const sectionTitle = document.createElement('h4');
  sectionTitle.textContent = 'TACACS+ Servers';
  tacacsTab.appendChild(sectionTitle);
  
  // Create main TACACS+ server form group
  const serverGroup = document.createElement('div');
  serverGroup.className = 'form-group';
  serverGroup.innerHTML = `
    <label for="tacacs-server-group">Server Group Name:</label>
    <input type="text" id="tacacs-server-group" value="TACACS-SERVERS" placeholder="e.g., TACACS-SERVERS">
    
    <div class="row">
      <div class="col">
        <label for="tacacs-ip-1">Primary Server IP:</label>
        <input type="text" id="tacacs-ip-1" placeholder="e.g., 10.1.1.102">
      </div>
      <div class="col">
        <label for="tacacs-key-1">Primary Shared Secret:</label>
        <input type="password" id="tacacs-key-1" placeholder="Shared secret">
      </div>
    </div>
    
    <div class="row">
      <div class="col">
        <label for="tacacs-ip-2">Secondary Server IP:</label>
        <input type="text" id="tacacs-ip-2" placeholder="e.g., 10.1.1.103">
      </div>
      <div class="col">
        <label for="tacacs-key-2">Secondary Shared Secret:</label>
        <input type="password" id="tacacs-key-2" placeholder="Shared secret">
      </div>
    </div>
  `;
  tacacsTab.appendChild(serverGroup);
  
  // Create accordion group for TACACS+ settings
  const accordionGroup = document.createElement('div');
  accordionGroup.className = 'accordion-group';
  
  // Add TACACS+ basic options accordion
  const basicConfig = `
    <div class="row">
      <div class="col">
        <label for="tacacs-port">Port:</label>
        <input type="number" id="tacacs-port" value="49">
      </div>
      <div class="col">
        <label for="tacacs-timeout">Timeout (seconds):</label>
        <input type="number" id="tacacs-timeout" value="5">
      </div>
    </div>
    
    <div class="checkbox-group">
      <label>
        <input type="checkbox" id="tacacs-single-connection"> 
        Enable Single-Connection Mode
      </label>
    </div>
    
    <div class="checkbox-group">
      <label>
        <input type="checkbox" id="tacacs-directed-request"> 
        Enable Directed-Request Mode
      </label>
    </div>
  `;
  accordionGroup.appendChild(createAccordion('TACACS+ Connection Options', basicConfig, true));
  
  // Add TACACS+ authorization accordion
  const authConfig = `
    <div class="checkbox-group">
      <label>
        <input type="checkbox" id="auth-exec" checked> 
        Enable EXEC Authorization
      </label>
    </div>
    
    <div class="checkbox-group">
      <label>
        <input type="checkbox" id="auth-commands" checked> 
        Enable Command Authorization
      </label>
    </div>
    
    <div id="command-auth-options">
      <div class="checkbox-group">
        <label>
          <input type="checkbox" id="auth-commands-15" checked> 
          Privilege Level 15 (Enable)
        </label>
      </div>
      
      <div class="checkbox-group">
        <label>
          <input type="checkbox" id="auth-commands-1"> 
          Privilege Level 1 (User)
        </label>
      </div>
    </div>
  `;
  accordionGroup.appendChild(createAccordion('TACACS+ Authorization', authConfig));
  
  // Add TACACS+ accounting accordion
  const acctConfig = `
    <div class="checkbox-group">
      <label>
        <input type="checkbox" id="acct-exec" checked> 
        Enable EXEC Session Accounting
      </label>
    </div>
    
    <div class="checkbox-group">
      <label>
        <input type="checkbox" id="acct-commands" checked> 
        Enable Command Accounting
      </label>
    </div>
    
    <div id="command-acct-options">
      <div class="checkbox-group">
        <label>
          <input type="checkbox" id="acct-commands-15" checked> 
          Privilege Level 15 (Enable)
        </label>
      </div>
      
      <div class="checkbox-group">
        <label>
          <input type="checkbox" id="acct-commands-1"> 
          Privilege Level 1 (User)
        </label>
      </div>
    </div>
  `;
  accordionGroup.appendChild(createAccordion('TACACS+ Accounting', acctConfig));
  
  // Add to tab
  tacacsTab.appendChild(accordionGroup);
}

    </script>
    
    <script id="discovery-tab-update-script" type="text/plain">
// Find the discovery tabs section
const discoveryTabs = document.querySelector('.discovery-tabs');
if (discoveryTabs) {
  // Create the Network Scoping tab
  const scopingTab = document.createElement('button');
  scopingTab.className = 'discovery-tab';
  scopingTab.setAttribute('onclick', 'showDiscoveryTab(\'scoping\', this)');
  scopingTab.textContent = 'Network Scoping';
  
  // Add it after the first tab (usually Network Scan)
  const firstTab = discoveryTabs.querySelector('.discovery-tab');
  if (firstTab) {
    discoveryTabs.insertBefore(scopingTab, firstTab.nextSibling);
  } else {
    discoveryTabs.appendChild(scopingTab);
  }
}

// Create a placeholder for the Network Scoping content
const scopingPlaceholder = document.createElement('div');
scopingPlaceholder.id = 'disc-scoping';
scopingPlaceholder.className = 'discovery-section';
scopingPlaceholder.style.display = 'none';
scopingPlaceholder.innerHTML = 'Loading Network Scoping...';

// Add it to the discovery content area
const discoveryContent = document.querySelector('.discovery-content');
if (discoveryContent) {
  discoveryContent.appendChild(scopingPlaceholder);
}

// Load the Network Scoping content
fetch('network-scoping.html')
  .then(response => response.text())
  .then(html => {
    scopingPlaceholder.innerHTML = html;
    // Initialize any required components
    document.querySelectorAll('#disc-scoping .eap-method').forEach(checkbox => {
      checkbox.addEventListener('change', function() {
        const optionsId = `${this.id}-options`;
        const options = document.getElementById(optionsId);
        if (options) {
          options.style.display = this.checked ? 'block' : 'none';
        }
      });
    });
    
    // Initialize wireless/switch model selectors
    const wirelessVendor = document.getElementById('wireless-vendor');
    if (wirelessVendor) {
      wirelessVendor.addEventListener('change', updateWirelessModels);
      // Initialize models
      updateWirelessModels();
    }
    
    const switchVendor = document.getElementById('switch-vendor');
    if (switchVendor) {
      switchVendor.addEventListener('change', updateSwitchModels);
      // Initialize models
      updateSwitchModels();
    }
    
    // Setup scoping type radio buttons
    document.querySelectorAll('input[name="scoping_type"]').forEach(radio => {
      radio.addEventListener('change', function() {
        const basicScoping = document.getElementById('basic-scoping');
        const advancedScoping = document.getElementById('advanced-scoping');
        
        if (basicScoping DISCOVERY_TAB_UPDATE_PLACEHOLDERDISCOVERY_TAB_UPDATE_PLACEHOLDER advancedScoping) {
          basicScoping.style.display = this.value === 'basic' ? 'block' : 'none';
          advancedScoping.style.display = this.value === 'advanced' ? 'block' : 'none';
        }
      });
    });
  })
  .catch(error => {
    console.error('Error loading Network Scoping content:', error);
    scopingPlaceholder.innerHTML = 'Error loading Network Scoping content.';
  });

    </script>
    
    <script id="vendor-options-update-script" type="text/plain">
// Add vendor-specific options to Step 5 (Advanced)
const advancedStep = document.getElementById('step-5');
if (advancedStep) {
  // Create vendor-specific options section
  const vendorOptionsSection = document.createElement('div');
  vendorOptionsSection.className = 'accordion';
  vendorOptionsSection.innerHTML = `
    <div class="accordion-header">
      <span>Vendor-Specific Options</span>
      <span class="accordion-icon">+</span>
    </div>
    <div class="accordion-content">
      <div id="vendor-specific-placeholder">
        Loading vendor options...
      </div>
    </div>
  `;
  
  // Add it to the page
  const navButtons = advancedStep.querySelector('.nav-buttons');
  if (navButtons) {
    advancedStep.insertBefore(vendorOptionsSection, navButtons);
  }
  
  // Fetch vendor-specific options
  fetch('vendor-specific-options.html')
    .then(response => response.text())
    .then(html => {
      const placeholder = document.getElementById('vendor-specific-placeholder');
      if (placeholder) {
        placeholder.innerHTML = html;
      }
      
      // Initialize event listeners
      const wirelessVendor = document.getElementById('wireless-vendor');
      if (wirelessVendor) {
        wirelessVendor.addEventListener('change', updateWirelessModels);
      }
      
      const switchVendor = document.getElementById('switch-vendor');
      if (switchVendor) {
        switchVendor.addEventListener('change', updateSwitchModels);
      }
      
      // Setup event for NX-OS source interface
      const nxosSourceInterface = document.getElementById('nxos-source-interface');
      if (nxosSourceInterface) {
        nxosSourceInterface.addEventListener('change', function() {
          const group = document.getElementById('nxos-source-interface-group');
          if (group) {
            group.style.display = this.checked ? 'block' : 'none';
          }
        });
      }
      
      // Setup event for Extreme MAC refresh timer
      const extremeMacRefresh = document.getElementById('extreme-mac-refresh-time');
      if (extremeMacRefresh) {
        extremeMacRefresh.addEventListener('change', function() {
          const group = document.getElementById('extreme-mac-refresh-group');
          if (group) {
            group.style.display = this.checked ? 'block' : 'none';
          }
        });
      }
      
      // Initialize vendor options based on current selection
      updateVendorSpecificOptions();
    })
    .catch(error => {
      console.error('Error loading vendor-specific options:', error);
      const placeholder = document.getElementById('vendor-specific-placeholder');
      if (placeholder) {
        placeholder.innerHTML = 'Error loading vendor-specific options.';
      }
    });
}

    </script>
    
    <script>
      document.getElementById('update-button').addEventListener('click', function() {
        try {
          // Add CSS styles first
          const styleElement = document.createElement('style');
          styleElement.textContent = `
CSS_STYLES_PLACEHOLDER
          `;
          document.head.appendChild(styleElement);
          console.log('Added CSS styles');
          
          // Apply DOM updates
          const scriptElement = document.createElement('script');
          scriptElement.textContent = `
// DOM update script for Dot1Xer Supreme
console.log('Executing DOM updates for Dot1Xer Supreme...');

// Apply server tab updates
eval(document.getElementById('server-tab-update-script').textContent);
console.log('Applied server tab updates');

// Apply discovery tab updates
eval(document.getElementById('discovery-tab-update-script').textContent);
console.log('Applied discovery tab updates');

// Apply vendor options updates
eval(document.getElementById('vendor-options-update-script').textContent);
console.log('Applied vendor options updates');

// Fix accordion functionality
document.querySelectorAll('.accordion-header').forEach(header => {
  if (!header.hasAttribute('data-event-bound')) {
    header.setAttribute('data-event-bound', 'true');
    header.addEventListener('click', function() {
      this.classList.toggle('active');
      const content = this.nextElementSibling;
      
      if (content) {
        if (content.style.display === 'block') {
          content.style.display = 'none';
          // Update icon
          const icon = this.querySelector('.accordion-icon');
          if (icon) {
            icon.textContent = '+';
          }
        } else {
          content.style.display = 'block';
          // Update icon
          const icon = this.querySelector('.accordion-icon');
          if (icon) {
            icon.textContent = '-';
          }
        }
      }
    });
  }
});
console.log('Fixed accordion functionality');

// Open first accordion in each group
document.querySelectorAll('.accordion-group').forEach(group => {
  const firstAccordion = group.querySelector('.accordion-header');
  if (firstAccordion DOM_UPDATES_PLACEHOLDERDOM_UPDATES_PLACEHOLDER !firstAccordion.classList.contains('active')) {
    // Simulate click to open
    firstAccordion.click();
  }
});
console.log('Opened first accordion in each group');

// Initialize vendor-specific options
const vendorSelect = document.getElementById('vendor-select');
const platformSelect = document.getElementById('platform-select');
if (vendorSelect DOM_UPDATES_PLACEHOLDERDOM_UPDATES_PLACEHOLDER platformSelect) {
  vendorSelect.addEventListener('change', updateVendorSpecificOptions);
  platformSelect.addEventListener('change', updateVendorSpecificOptions);
  
  // Initial update
  updateVendorSpecificOptions();
}
console.log('Initialized vendor-specific options');

// Initialize EAP method checkboxes
document.querySelectorAll('.eap-method').forEach(checkbox => {
  checkbox.addEventListener('change', function() {
    const optionsId = `${this.id}-options`;
    const options = document.getElementById(optionsId);
    if (options) {
      options.style.display = this.checked ? 'block' : 'none';
    }
  });
  
  // Set initial state
  if (checkbox.checked) {
    const optionsId = `${checkbox.id}-options`;
    const options = document.getElementById(optionsId);
    if (options) {
      options.style.display = 'block';
    }
  }
});
console.log('Initialized EAP method checkboxes');

console.log('DOM updates completed successfully');

          `;
          document.body.appendChild(scriptElement);
          console.log('Applied DOM updates');
          
          // Show success message
          document.getElementById('success-message').style.display = 'block';
          document.getElementById('update-button').disabled = true;
        } catch (error) {
          console.error('Error applying updates:', error);
          document.getElementById('error-message').style.display = 'block';
          document.getElementById('error-message').textContent = 
            'Error applying updates: ' + error.message;
        }
      });
    </script>
  </div>
</body>
</html>
